webpackJsonp([91172818476772],{1344:function(s,a){s.exports={data:{package:{type:"published",id:"re-formality",name:"re-formality",version:"3.2.0",category:"library",flags:[],platforms:["browser"],description:"Reasonable form validation tool for reason-react",keywords:["react","form validation"],license:"MIT",updated:"2020-01-04T03:27:21.176Z",stars:180,score:.6461835070088434,quality:.8425741454109482,popularity:.12409575115254715,maintenance:.9999364299490501,readme:'<h1 id="formality"><a href="#formality" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Formality</h1>\n<p><a href="https://www.npmjs.com/package/re-formality"><img src="https://img.shields.io/npm/v/re-formality.svg?style=flat-square" alt="npm version"></a>\n<a href="https://travis-ci.org/alexfedoseev/re-formality"><img src="https://img.shields.io/travis/alexfedoseev/re-formality/master.svg?style=flat-square" alt="build status"></a>\n<a href="https://www.npmjs.com/package/re-formality"><img src="https://img.shields.io/npm/l/re-formality.svg?style=flat-square" alt="license"></a></p>\n<p>Form validation tool for <a href="https://reasonml.github.io/reason-react/"><code>reason-react</code></a>.</p>\n<h2 id="features"><a href="#features" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h2>\n<ul>\n<li>Validation strategies</li>\n<li>Async validations (debounced on change / on blur)</li>\n<li>I18n compatible</li>\n</ul>\n<h2 id="toc"><a href="#toc" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TOC</h2>\n<ul>\n<li><a href="#installation">Installation</a></li>\n<li><a href="#examples">Examples</a></li>\n<li>\n<p><a href="#concepts">Concepts</a></p>\n<ul>\n<li><a href="#strategies">Strategies</a></li>\n</ul>\n</li>\n<li>\n<p><a href="#usage">Usage</a></p>\n<ul>\n<li><a href="#form-config">Form config</a></li>\n<li><a href="#form-hook">Form hook</a></li>\n<li><a href="#rendering">Rendering</a></li>\n<li><a href="#async-validations">Async validations</a></li>\n<li><a href="#custom-field-comparator">Custom field comparator</a></li>\n<li><a href="#i18n">I18n</a></li>\n</ul>\n</li>\n<li><a href="#alternatives">Alternatives</a></li>\n<li><a href="#license">License</a></li>\n</ul>\n<h2 id="installation"><a href="#installation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>\n<div class="redex-codeblock"><pre class="hljs lang-shell"><code><span class="hljs-comment"># yarn</span>\nyarn add re-formality\n<span class="hljs-comment"># or npm</span>\nnpm install --save re-formality</code></pre></div>\n<p>Then add it to <code>bsconfig.json</code>:</p>\n<div class="redex-codeblock"><pre class="hljs lang-json"><code><span class="hljs-string">"bs-dependencies"</span>: [\n  <span class="hljs-string">"re-formality"</span>\n]</code></pre></div>\n<h2 id="examples"><a href="#examples" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h2>\n<ul>\n<li><a href="https://re-formality.now.sh">Live demo</a></li>\n<li><a href="https://minima.app">Live @ minima.app</a></li>\n<li><a href="./examples">Sources</a></li>\n</ul>\n<h2 id="concepts"><a href="#concepts" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concepts</h2>\n<p>The main purpose of this library is to provide great form validation UX. To achieve this, <code>Formality</code> follows the following principle:</p>\n<p align="center">\n<strong>Validation feedback should be provided as soon as possible but not too soon.</strong>\n</p>\n<p>The hardest part is to figure out the right moment when first validation results should be emitted in UI.</p>\n<p>Let\'s break down a case with credit card field. A user opens a form and focuses on a field. When the first character is typed, the field is in an invalid state but it\'s not polite to show an error immediately: we should let user a chance to finish what he\'s doing. While the user is typing and field is in invalid state, we don\'t provide any feedback in UI. If after some character validator reported valid result, it\'s a proper moment to indicate a success (e.g. show credit card type). But if the user left the field in an invalid state (e.g. moved to another field) we have all rights to emit an error. After the first result is emitted, we update validation state in UI on every change.</p>\n<p>Sadly, form fields are different and credit card scenario is not universal. This is where strategies kick in.</p>\n<h3 id="strategies"><a href="#strategies" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strategies</h3>\n<p>We can\'t have a single scenario for all the cases but we can spot the most common ones, describe a logic of each and apply proper scenarios to specific form fields. To understand a behavior of each strategy, add the following prefix to its name: <em>"Start providing feedback in UI on..."</em></p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Strategy</span> = </span>{\n  <span class="hljs-keyword">type</span> t =\n    | <span class="hljs-type">OnFirstBlur</span>\n    | <span class="hljs-type">OnFirstChange</span>\n    | <span class="hljs-type">OnFirstSuccess</span>\n    | <span class="hljs-type">OnFirstSuccessOrFirstBlur</span>\n    | <span class="hljs-type">OnSubmit</span>;\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">module</span> <span class="hljs-type">Strategy</span> =\n  <span class="hljs-keyword">struct</span>\n    <span class="hljs-keyword">type</span> t =\n      | <span class="hljs-type">OnFirstBlur</span>\n      | <span class="hljs-type">OnFirstChange</span>\n      | <span class="hljs-type">OnFirstSuccess</span>\n      | <span class="hljs-type">OnFirstSuccessOrFirstBlur</span>\n      | <span class="hljs-type">OnSubmit</span>\n  <span class="hljs-keyword">end</span></code></pre>\n      </div>\n    </div>\n  \n<h4 id="onfirstblur"><a href="#onfirstblur" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>OnFirstBlur</code></h4>\n<p>Results are emitted on the first blur. After first results are emitted, a user receives feedback on every change in this field.</p>\n<h4 id="onfirstchange"><a href="#onfirstchange" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>OnFirstChange</code></h4>\n<p>Results are emitted on the first change in a field (basically, as a user types).</p>\n<h4 id="onfirstsuccess"><a href="#onfirstsuccess" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>OnFirstSuccess</code></h4>\n<p>Results are emitted on first successful validation. After first results are emitted, a user receives feedback on every change in this field.</p>\n<h4 id="onfirstsuccessorfirstblur-"><a href="#onfirstsuccessorfirstblur-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>OnFirstSuccessOrFirstBlur</code> ✨</h4>\n<p>Results are emitted on first successful validation or on the first blur. After first results are emitted, a user receives feedback on every change in this field.</p>\n<h4 id="onsubmit"><a href="#onsubmit" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>OnSubmit</code></h4>\n<p>Results are emitted only after the first submission attempt. After this, results for each field are emitted on every change until the form is reset.</p>\n<h2 id="usage"><a href="#usage" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>\n<p>It takes 3 steps to implement a form:</p>\n<ol>\n<li>Define form config.</li>\n<li>Create form hook.</li>\n<li>Render form hook and form UI.</li>\n</ol>\n<blockquote>\n<p>Code > 1000 words. Quick example for you:</p>\n</blockquote>\n<details>\n<summary>Spoiler</summary>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">LoginForm</span> = </span>{\n  open <span class="hljs-type">Formality</span>;\n\n  <span class="hljs-keyword">type</span> field =\n    | <span class="hljs-type">Email</span>\n    | <span class="hljs-type">Password</span>;\n\n  <span class="hljs-keyword">type</span> state = {\n    email: string,\n    password: string,\n  };\n\n  <span class="hljs-keyword">type</span> message = string;\n  <span class="hljs-keyword">type</span> submissionError = unit;\n\n  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">EmailField</span> = </span>{\n    <span class="hljs-keyword">let</span> update = (state, value) =&gt; {...state, email: value};\n\n    <span class="hljs-keyword">let</span> validator = {\n      field: <span class="hljs-type">Email</span>,\n      strategy: <span class="hljs-type">Strategy</span>.<span class="hljs-type">OnFirstSuccessOrFirstBlur</span>,\n      dependents: <span class="hljs-type">None</span>,\n      validate: state =&gt;\n        <span class="hljs-keyword">switch</span> (state.email) {\n        | <span class="hljs-string">""</span> =&gt; <span class="hljs-type">Error</span>(<span class="hljs-string">"Uh oh error"</span>)\n        | <span class="hljs-number">_</span> =&gt; <span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span>)\n        },\n    };\n  };\n\n  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">PasswordField</span> = </span>{\n    <span class="hljs-keyword">let</span> update = (state, value) =&gt; {...state, password: value};\n\n    <span class="hljs-keyword">let</span> validator = {\n      field: <span class="hljs-type">Password</span>,\n      strategy: <span class="hljs-type">Strategy</span>.<span class="hljs-type">OnFirstBlur</span>,\n      dependents: <span class="hljs-type">None</span>,\n      validate: state =&gt;\n        <span class="hljs-keyword">switch</span> (state.password) {\n        | <span class="hljs-string">""</span> =&gt; <span class="hljs-type">Error</span>(<span class="hljs-string">"Uh oh error"</span>)\n        | <span class="hljs-number">_</span> =&gt; <span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span>)\n        },\n    };\n  };\n\n  <span class="hljs-keyword">let</span> validators = [\n    <span class="hljs-type">EmailField</span>.validator,\n    <span class="hljs-type">PasswordField</span>.validator,\n  ];\n};\n\n<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">LoginFormHook</span> = <span class="hljs-title">Formality</span>.<span class="hljs-title">Make</span>(<span class="hljs-title">LoginForm</span>);\n\n[@<span class="hljs-title">react</span>.<span class="hljs-title">component</span>]\n<span class="hljs-title">let</span> <span class="hljs-title">make</span> = () =&gt; </span>{\n  <span class="hljs-keyword">let</span> form =\n    <span class="hljs-type">LoginFormHook</span>.useForm(\n      ~initialState=<span class="hljs-type">LoginForm</span>.{email: <span class="hljs-string">""</span>, password: <span class="hljs-string">""</span>},\n      ~onSubmit=(state, form) =&gt; {\n        <span class="hljs-comment">// Submit form and use callbacks to update form container</span>\n      },\n    );\n\n  &lt;form onSubmit={form.submit-&gt;<span class="hljs-type">Formality</span>.<span class="hljs-type">Dom</span>.preventDefault}&gt;\n    &lt;input\n      value={form.state.email}\n      disabled={form.submitting}\n      onBlur={<span class="hljs-number">_</span> =&gt; form.blur(<span class="hljs-type">Email</span>)}\n      onChange={event =&gt;\n        form.change(\n          <span class="hljs-type">Email</span>,\n          <span class="hljs-type">LoginForm</span>.<span class="hljs-type">EmailField</span>.update(\n            form.state,\n            event-&gt;<span class="hljs-type">ReactEvent</span>.<span class="hljs-type">Form</span>.target##value,\n          ),\n        )\n      }\n    /&gt;\n    {<span class="hljs-keyword">switch</span> (<span class="hljs-type">Email</span>-&gt;(form.result)) {\n      | <span class="hljs-type">Some</span>(<span class="hljs-type">Error</span>(message)) =&gt;\n        &lt;div className=<span class="hljs-string">"failure"</span>&gt; message-&gt;<span class="hljs-type">React</span>.string &lt;/div&gt;\n      | <span class="hljs-type">Some</span>(<span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span> | <span class="hljs-type">NoValue</span>))\n      | <span class="hljs-type">None</span> =&gt; <span class="hljs-type">React</span>.null\n      }}\n    &lt;input\n      value={form.state.password}\n      disabled={form.submitting}\n      onBlur={<span class="hljs-number">_</span> =&gt; form.blur(<span class="hljs-type">Password</span>)}\n      onChange={event =&gt;\n        form.change(\n          <span class="hljs-type">Password</span>,\n          <span class="hljs-type">LoginForm</span>.<span class="hljs-type">PasswordField</span>.update(\n            form.state,\n            event-&gt;<span class="hljs-type">ReactEvent</span>.<span class="hljs-type">Form</span>.target##value,\n          ),\n        )\n      }\n    /&gt;\n    {<span class="hljs-keyword">switch</span> (<span class="hljs-type">Password</span>-&gt;(form.result)) {\n      | <span class="hljs-type">Some</span>(<span class="hljs-type">Error</span>(message)) =&gt;\n        &lt;div className=<span class="hljs-string">"failure"</span>&gt; message-&gt;<span class="hljs-type">React</span>.string &lt;/div&gt;\n      | <span class="hljs-type">Some</span>(<span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span> | <span class="hljs-type">NoValue</span>))\n      | <span class="hljs-type">None</span> =&gt; <span class="hljs-type">React</span>.null\n      }}\n    &lt;button disabled={form.submitting}&gt;\n      (form.submitting ? <span class="hljs-string">"Submitting..."</span> : <span class="hljs-string">"Submit"</span>)-&gt;<span class="hljs-type">React</span>.string\n    &lt;/button&gt;\n  &lt;/form&gt;;\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">3731</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n</details>\n<h3 id="form-config"><a href="#form-config" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Form config</h3>\n<p>Form config is a module:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyForm</span> = </span>{\n  <span class="hljs-keyword">type</span> field;\n  <span class="hljs-keyword">type</span> state;\n  <span class="hljs-keyword">type</span> message;\n  <span class="hljs-keyword">type</span> submissionError;\n  <span class="hljs-keyword">let</span> validators: list(validator);\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">958</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<p>To make things happen, you must provide few types and list of validators. Depending on whether you need async validations or not, your config will require (or not) additional data. But most of the things are common for all types of forms. Let\'s start with the simplest case without async validations—this is what\'s required for all types of forms—and then async differences will be outlined in <a href="#async-validations">Async validations</a> section.</p>\n<h4 id="type-field"><a href="#type-field" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>type field</code></h4>\n<p>A variant where tags are form fields.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> field =\n  | <span class="hljs-type">Email</span>\n  | <span class="hljs-type">Password</span>;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> field =\n  | <span class="hljs-type">Email</span>\n  | <span class="hljs-type">Password</span></code></pre>\n      </div>\n    </div>\n  \n<h4 id="type-state"><a href="#type-state" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>type state</code></h4>\n<p><code>state</code> is a record that defines a shape of a form state.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> state = {\n  email: string,\n  password: string,\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> state = {\n  email: <span class="hljs-built_in">string</span>;\n  password: <span class="hljs-built_in">string</span>;}</code></pre>\n      </div>\n    </div>\n  \n<h4 id="type-message"><a href="#type-message" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>type message</code></h4>\n<p>The type of error messages that will be rendered in UI. Feel free to set it to whatever you need.</p>\n<p>The most common scenario is:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> message = string;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> message = <span class="hljs-built_in">string</span></code></pre>\n      </div>\n    </div>\n  \n<p>If you build i18n\'ized app then it\'s going to be something like this:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> message = <span class="hljs-type">I18n</span>.t;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> message = <span class="hljs-type">I18n</span>.t</code></pre>\n      </div>\n    </div>\n  \n<h4 id="type-submissionerror"><a href="#type-submissionerror" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>type submissionError</code></h4>\n<p>When you submit a form submission might fail, for various reasons. It might be a bad password on login attempt (expected error) or server crash (unexpected error), anything. This kind of error is specific to a form and its type describes what might go wrong on form submission.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> submissionError =\n  | <span class="hljs-type">UserNotFound</span>\n  | <span class="hljs-type">BadPassword</span>\n  | <span class="hljs-type">UnexpectedServerError</span>;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> submissionError =\n  | <span class="hljs-type">UserNotFound</span>\n  | <span class="hljs-type">BadPassword</span>\n  | <span class="hljs-type">UnexpectedServerError</span></code></pre>\n      </div>\n    </div>\n  \n<p>Later on, on failed form submission, you will be able to pass this error to form container and provide appropriate feedback to users in UI.</p>\n<h4 id="let-validators-listvalidator"><a href="#let-validators-listvalidator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>let validators: list(validator)</code></h4>\n<p>Field validators.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">EmailField</span> = </span>{\n  <span class="hljs-keyword">let</span> validator = {\n    field: <span class="hljs-type">Email</span>,\n    strategy: <span class="hljs-type">Strategy</span>.<span class="hljs-type">OnFirstSuccessOrFirstBlur</span>,\n    dependents: <span class="hljs-type">None</span>,\n    validate: state =&gt;\n      <span class="hljs-keyword">switch</span> (state.email) {\n      | <span class="hljs-string">""</span> =&gt; <span class="hljs-type">Error</span>(<span class="hljs-string">"Uh oh error"</span>)\n      | <span class="hljs-number">_</span> =&gt; <span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span>)\n    },\n  };\n};\n\n<span class="hljs-keyword">let</span> validators = [\n  <span class="hljs-type">EmailField</span>.validator,\n  ...\n];</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">2842</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<h5 id="validator"><a href="#validator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>validator</code></h5>\n<p>It\'s a record of 4 items:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> validator(\'field, \'state, \'message) = {\n  field: \'field,\n  strategy: <span class="hljs-type">Formality</span>.<span class="hljs-type">Strategy</span>.t,\n  dependents: option(list(\'field)),\n  validate: \'state =&gt; <span class="hljs-type">Result</span>.t(ok, \'message),\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> (<span class="hljs-symbol">\'field</span>,<span class="hljs-symbol">\'state</span>,<span class="hljs-symbol">\'message</span>) validator =\n  {\n  field: <span class="hljs-symbol">\'field</span>;\n  strategy: <span class="hljs-type">Formality</span>.<span class="hljs-type">Strategy</span>.t;\n  dependents: <span class="hljs-symbol">\'field</span> <span class="hljs-built_in">list</span> option;\n  validate: <span class="hljs-symbol">\'state</span> -&gt; (ok,<span class="hljs-symbol">\'message</span>) <span class="hljs-type">Result</span>.t;}</code></pre>\n      </div>\n    </div>\n  \n<h6 id="strategy"><a href="#strategy" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>strategy</code></h6>\n<p>See <a href="#strategies">Strategies</a>.</p>\n<h6 id="dependents"><a href="#dependents" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>dependents</code></h6>\n<p>Optional list of fields that must be revalidated on a change in the current field. E.g. <code>PasswordConfirmation</code> must be revalidated on a change in <code>Password</code> field:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code>field: <span class="hljs-type">Password</span>,\ndependents: [<span class="hljs-type">PasswordConfirmation</span>]-&gt;<span class="hljs-type">Some</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">352</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<h6 id="validate"><a href="#validate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>validate</code></h6>\n<p>A function that takes <code>state</code> and returns Belt\'s <code>Result.t</code>:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> ok =\n  | <span class="hljs-type">Valid</span>\n  | <span class="hljs-type">NoValue</span>;\n\n<span class="hljs-keyword">type</span> validate(\'state, \'message) = \'state =&gt; <span class="hljs-type">Result</span>.t(ok, \'message);</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> ok =\n  | <span class="hljs-type">Valid</span>\n  | <span class="hljs-type">NoValue</span>\n<span class="hljs-keyword">type</span> (<span class="hljs-symbol">\'state</span>,<span class="hljs-symbol">\'message</span>) validate = <span class="hljs-symbol">\'state</span> -&gt; (ok,<span class="hljs-symbol">\'message</span>) <span class="hljs-type">Result</span>.t</code></pre>\n      </div>\n    </div>\n  \n<p>Most of the time you need <code>Ok(Valid)</code> or <code>Error(\'message)</code>. You want to return <code>Ok(NoValue)</code> when optional field receives no value (e.g. <code>value == ""</code>). <code>Valid</code> and <code>NoValue</code> are explicitly differentiated since there\'s no reason to show success message/icon in UI when no value is provided.</p>\n<h3 id="form-hook"><a href="#form-hook" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Form hook</h3>\n<p>To create form hook simply do the following:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyFormHook</span> = <span class="hljs-title">Formality</span>.<span class="hljs-title">Make</span>(<span class="hljs-title">MyForm</span>);</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">module</span> <span class="hljs-type">MyFormHook</span> = <span class="hljs-type">Formality</span>.<span class="hljs-type">Make</span>(<span class="hljs-type">MyForm</span>)</code></pre>\n      </div>\n    </div>\n  \n<p>It creates React <code>useForm</code> hook for general form.</p>\n<p>If you render forms with async validations, use:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-comment">/* Async validations on change (debounced) */</span>\n<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyAsyncFormHook</span> = <span class="hljs-title">Formality</span>.<span class="hljs-title">Async</span>.<span class="hljs-title">Make</span>(<span class="hljs-title">MyForm</span>);\n\n/* <span class="hljs-title">Async</span> <span class="hljs-title">validations</span> <span class="hljs-title">on</span> <span class="hljs-title">blur</span> */\n<span class="hljs-title">module</span> <span class="hljs-title">MyAsyncFormHook</span> = <span class="hljs-title">Formality</span>.<span class="hljs-title">Async</span>.<span class="hljs-title">MakeOnBlur</span>(<span class="hljs-title">MyForm</span>);</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">module</span> <span class="hljs-type">MyAsyncFormHook</span> = <span class="hljs-type">Formality</span>.<span class="hljs-type">Async</span>.<span class="hljs-type">Make</span>(<span class="hljs-type">MyForm</span>)\n<span class="hljs-keyword">module</span> <span class="hljs-type">MyAsyncFormHook</span> = <span class="hljs-type">Formality</span>.<span class="hljs-type">Async</span>.<span class="hljs-type">MakeOnBlur</span>(<span class="hljs-type">MyForm</span>)</code></pre>\n      </div>\n    </div>\n  \n<h3 id="rendering"><a href="#rendering" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rendering</h3>\n<p>Form hook accepts 2 arguments and returns record with everything you need to render your UI:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">let</span> form =\n  <span class="hljs-type">MyFormHook</span>.useForm(\n    ~initialState={email: <span class="hljs-string">""</span>, password: <span class="hljs-string">""</span>},\n    ~onSubmit=(state, form) =&gt; {\n      <span class="hljs-comment">// Submit form and use callbacks to update form container</span>\n    },\n  );\n\n<span class="hljs-comment">// Use `form` to render your UI...</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">3731</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<h4 id="initialstate"><a href="#initialstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>initialState</code></h4>\n<p>It\'s <code>state</code> record with initial values for each form field.</p>\n<h4 id="onsubmit-1"><a href="#onsubmit-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>onSubmit</code></h4>\n<p>This handler will be triggered on form submission (only when all validators returned <code>Ok(_)</code>).</p>\n<p>It accepts two arguments:\n1. <code>state</code>: current state of a form\n2. <code>submissionCallbacks</code>: record with 4 callbacks</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> submissionCallbacks(\'state, \'submissionError) = {\n  notifyOnSuccess: option(\'state) =&gt; unit,\n  notifyOnFailure: \'submissionError =&gt; unit,\n  reset: unit =&gt; unit,\n  dismissSubmissionResult: unit =&gt; unit,\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> (<span class="hljs-symbol">\'state</span>,<span class="hljs-symbol">\'submissionError</span>) submissionCallbacks =\n  {\n  notifyOnSuccess: <span class="hljs-symbol">\'state</span> option -&gt; <span class="hljs-built_in">unit</span>;\n  notifyOnFailure: <span class="hljs-symbol">\'submissionError</span> -&gt; <span class="hljs-built_in">unit</span>;\n  reset: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">unit</span>;\n  dismissSubmissionResult: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">unit</span>;}</code></pre>\n      </div>\n    </div>\n  \n<h5 id="notifyonsuccess"><a href="#notifyonsuccess" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>notifyOnSuccess</code></h5>\n<p>Trigger this callback when server responded with success. It accepts optional state argument: if it\'s provided, this state will be set as a next form state.</p>\n<h5 id="notifyonfailure"><a href="#notifyonfailure" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>notifyOnFailure</code></h5>\n<p>Trigger this callback when server responded with an error. It accepts 1 argument of type <code>MyForm.submissionError</code> (defined in form config).</p>\n<p>You can access this data in render via <code>form.status</code> (see <a href="#form-status"><code>form.status</code></a>).</p>\n<h5 id="reset"><a href="#reset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>reset</code></h5>\n<p>Simply, resets a form container state.</p>\n<h5 id="formdismisssubmissionresult"><a href="#formdismisssubmissionresult" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.dismissSubmissionResult</code></h5>\n<p>Use it when you want to dismiss alerts with errors from server or success message without resetting a form. See <a href="#form-status"><code>form.status</code></a> for more details.</p>\n<h4 id="form-record"><a href="#form-record" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form</code> record</h4>\n<p><code>form</code> record, returned from the hook, contains everything you need to render UI:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> form = {\n  state: <span class="hljs-type">Form</span>.state,\n  status: <span class="hljs-type">FormStatus</span>.t,\n  result: <span class="hljs-type">Form</span>.field =&gt; option(result),\n  dirty: unit =&gt; bool,\n  valid: unit =&gt; bool, <span class="hljs-comment">/* not available in async forms */</span>\n  submitting: bool,\n  change: (<span class="hljs-type">Form</span>.field, <span class="hljs-type">Form</span>.state) =&gt; unit,\n  blur: <span class="hljs-type">Form</span>.field =&gt; unit,\n  submit: unit =&gt; unit,\n  reset: unit =&gt; unit,\n  mapSubmissionError: (\'submissionError =&gt; \'submissionError) =&gt; unit,\n  dismissSubmissionError: unit =&gt; unit,\n  dismissSubmissionResult: unit =&gt; unit,\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> form =\n  {\n  state: <span class="hljs-type">Form</span>.state;\n  status: <span class="hljs-type">FormStatus</span>.t;\n  result: <span class="hljs-type">Form</span>.field -&gt; result option;\n  dirty: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">bool</span>;\n  valid: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">bool</span>;\n  submitting: <span class="hljs-built_in">bool</span>;\n  change: <span class="hljs-type">Form</span>.field -&gt; <span class="hljs-type">Form</span>.state -&gt; <span class="hljs-built_in">unit</span>;\n  blur: <span class="hljs-type">Form</span>.field -&gt; <span class="hljs-built_in">unit</span>;\n  submit: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">unit</span>;\n  reset: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">unit</span>;\n  mapSubmissionError: (<span class="hljs-symbol">\'submissionError</span> -&gt; <span class="hljs-symbol">\'submissionError</span>) -&gt; <span class="hljs-built_in">unit</span>;\n  dismissSubmissionError: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">unit</span>;\n  dismissSubmissionResult: <span class="hljs-built_in">unit</span> -&gt; <span class="hljs-built_in">unit</span>;}</code></pre>\n      </div>\n    </div>\n  \n<h5 id="formstate"><a href="#formstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.state</code></h5>\n<p>Form state, obviously. Use it to set <code>values</code> of the form fields.</p>\n<h5 id="formstatus"><a href="#formstatus" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.status</code></h5>\n<p>Form status is a variant:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">FormStatus</span> = </span>{\n  <span class="hljs-keyword">type</span> t(\'error) =\n    | <span class="hljs-type">Editing</span>\n    | <span class="hljs-type">Submitting</span>\n    | <span class="hljs-type">Submitted</span>\n    | <span class="hljs-type">SubmissionFailed</span>(\'error);\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">module</span> <span class="hljs-type">FormStatus</span> =\n  <span class="hljs-keyword">struct</span>\n    <span class="hljs-keyword">type</span> <span class="hljs-symbol">\'error</span> t =\n      | <span class="hljs-type">Editing</span>\n      | <span class="hljs-type">Submitting</span>\n      | <span class="hljs-type">Submitted</span>\n      | <span class="hljs-type">SubmissionFailed</span> <span class="hljs-keyword">of</span> <span class="hljs-symbol">\'error</span>\n  <span class="hljs-keyword">end</span></code></pre>\n      </div>\n    </div>\n  \n<p>You can use it to show a spinner while a form is <code>Submitting</code>, or success message on <code>Submitted</code>, or display server errors using data that you passed to <code>notifyOnFailure</code> callback (it\'s available in <code>SubmissionFailed</code> tag payload).</p>\n<h5 id="formsubmitting"><a href="#formsubmitting" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.submitting</code></h5>\n<p>This prop is passed for convenience (as you will need it to disable form inputs and button while a form is <code>Submitting</code>). Basically, this is <code>true</code> when <code>form.status</code> is <code>Submitting</code>, <code>false</code> otherwise.</p>\n<h5 id="formresult"><a href="#formresult" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.result</code></h5>\n<p>Use this function to get validation result for a field.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">switch</span> (<span class="hljs-type">Email</span>-&gt;form.result) {\n| <span class="hljs-type">Some</span>(<span class="hljs-type">Error</span>(message)) =&gt;\n  &lt;div className=<span class="hljs-string">"failure"</span>&gt;\n    message-&gt;<span class="hljs-type">React</span>.string\n  &lt;/div&gt;\n| <span class="hljs-type">Some</span>(<span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span> | <span class="hljs-type">NoValue</span>))\n| <span class="hljs-type">None</span> =&gt; <span class="hljs-type">React</span>.null\n}</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">1444</span>: syntax error, consider adding a `;<span class="hljs-char">\' before</span></code></pre>\n      </div>\n    </div>\n  \n<h5 id="formdirty"><a href="#formdirty" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.dirty</code></h5>\n<p>This function will return <code>true</code> if any form field was touched, <code>false</code> otherwise.</p>\n<h5 id="formvalid"><a href="#formvalid" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.valid</code></h5>\n<p>This function will return <code>true</code> if all form field are valid, <code>false</code> otherwise. Not available in forms with async validations.</p>\n<h5 id="formchange"><a href="#formchange" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.change</code></h5>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> change = (<span class="hljs-type">Form</span>.field, <span class="hljs-type">Form</span>.state) =&gt; unit;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> change = <span class="hljs-type">Form</span>.field -&gt; <span class="hljs-type">Form</span>.state -&gt; <span class="hljs-built_in">unit</span></code></pre>\n      </div>\n    </div>\n  \n<p>This handler must be triggered <code>onChange</code>. It accepts <code>field</code> and the next form <code>state</code>.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyForm</span> = </span>{\n  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">EmailField</span> = </span>{\n    <span class="hljs-keyword">let</span> update = (state, value) =&gt; {...state, email: value};\n  };\n};\n\n&lt;input\n  value={form.state.email}\n  disabled={form.submitting}\n  onBlur={<span class="hljs-number">_</span> =&gt; form.blur(<span class="hljs-type">Email</span>)}\n  onChange={\n    event =&gt;\n      form.change(\n        <span class="hljs-type">Email</span>,\n        <span class="hljs-type">MyForm</span>.<span class="hljs-type">EmailField</span>.update(\n          form.state,\n          event-&gt;<span class="hljs-type">ReactEvent</span>.<span class="hljs-type">Form</span>.target##value,\n        ),\n      )\n  }\n/&gt;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">3731</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<h5 id="formblur"><a href="#formblur" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.blur</code></h5>\n<p>This handler must be triggered <code>onBlur</code>. It accepts only one <code>field</code> argument.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code>&lt;input\n  value={form.state.email}\n  disabled={form.submitting}\n  onBlur={<span class="hljs-number">_</span> =&gt; form.blur(<span class="hljs-type">Email</span>)}\n/&gt;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">3731</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<h5 id="formsubmit"><a href="#formsubmit" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.submit</code></h5>\n<p>Use it as <code>onSubmit</code> handler of a <code>&#x3C;form /></code> element:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code>&lt;form onSubmit={form.submit-&gt;<span class="hljs-type">Formality</span>.<span class="hljs-type">Dom</span>.preventDefault} /&gt;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">3001</span>: syntax error, consider adding a `;<span class="hljs-char">\' before</span></code></pre>\n      </div>\n    </div>\n  \n<h5 id="formreset"><a href="#formreset" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.reset</code></h5>\n<p>Resets form state.</p>\n<h5 id="formdismisssubmissionresult-1"><a href="#formdismisssubmissionresult-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.dismissSubmissionResult</code></h5>\n<p>Use it when you want to let user dismissing alerts with errors from server or success message without resetting a form. Under the hood, it changes <code>FormStatus.Submitted</code> &#x26; <code>FormStatus.SubmissionFailed</code> statuses back to <code>FormStatus.Editing</code>.</p>\n<h5 id="formmapsubmissionerror"><a href="#formmapsubmissionerror" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.mapSubmissionError</code></h5>\n<p>Maps over submission error. Useful for animating errors.</p>\n<h5 id="formdismisssubmissionerror"><a href="#formdismisssubmissionerror" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>form.dismissSubmissionError</code></h5>\n<p>Dismissing submission error only.</p>\n<h3 id="async-validations"><a href="#async-validations" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async validations</h3>\n<p>Some validations can\'t be performed locally, e.g. on signup, you want to validate if user\'s email is available or it\'s already taken.</p>\n<p>There are 2 common ways to provide async feedback: send a request to a server on every change or only on blur event. The first way is better in terms of UX but creates a significant load, so your client might become slow or a server might feel bad. The blur way doesn\'t have this problem (at least not that much) but UX is definitely not the best b/c user have to blur away from a field to receive a feedback.</p>\n<p>What can we do about it to have the best of both worlds? An answer is to debounce async validations on change. What does it mean and how does it work: when a user types something in in a form field, no external requests are triggered. Instead, it\'s put on hold. While the user is typing, we\'re waiting. Once he stopped and there was no activity in the certain period of time—async request is triggered.</p>\n<h4 id="debounced-async-validations-on-change"><a href="#debounced-async-validations-on-change" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debounced async validations on change</h4>\n<p>To implement debounced async validations you need to make some additions to common form config.</p>\n<h5 id="let-debounceinterval-int"><a href="#let-debounceinterval-int" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>let debounceInterval: int</code></h5>\n<p>Configure amount of time (in ms) that <code>Formality</code> should wait since last user activity before invoking debounced async validation.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-comment">/* Default interval: 700 */</span>\n<span class="hljs-keyword">let</span> debounceInterval = <span class="hljs-type">Formality</span>.debounceInterval;\n\n<span class="hljs-comment">/* Or any other custom int */</span>\n<span class="hljs-keyword">let</span> debounceInterval = <span class="hljs-number">1000</span>;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">let</span> debounceInterval = <span class="hljs-type">Formality</span>.debounceInterval\n<span class="hljs-keyword">let</span> debounceInterval = <span class="hljs-number">1000</span></code></pre>\n      </div>\n    </div>\n  \n<h5 id="validator-1"><a href="#validator-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>validator</code></h5>\n<p>In addition to <code>field</code>, <code>strategy</code>, <code>dependents</code> &#x26; <code>validate</code>, provide optional async validator.</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> asyncValidator(\'field, \'state, \'message) = {\n  field: \'field,\n  strategy: <span class="hljs-type">Formality</span>.<span class="hljs-type">Strategy</span>.t,\n  dependents: option(list(\'field)),\n  validate: \'state =&gt; <span class="hljs-type">Result</span>.t(ok, \'message),\n  validateAsync: option(\n    (\n      \'state =&gt; <span class="hljs-type">Js</span>.<span class="hljs-type">Promise</span>.t(<span class="hljs-type">Result</span>.t(ok, \'message)),\n      (\'state, \'state) =&gt; bool,\n    ),\n  ),\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> (<span class="hljs-symbol">\'field</span>,<span class="hljs-symbol">\'state</span>,<span class="hljs-symbol">\'message</span>) asyncValidator =\n  {\n  field: <span class="hljs-symbol">\'field</span>;\n  strategy: <span class="hljs-type">Formality</span>.<span class="hljs-type">Strategy</span>.t;\n  dependents: <span class="hljs-symbol">\'field</span> <span class="hljs-built_in">list</span> option;\n  validate: <span class="hljs-symbol">\'state</span> -&gt; (ok,<span class="hljs-symbol">\'message</span>) <span class="hljs-type">Result</span>.t;\n  validateAsync:\n    ((<span class="hljs-symbol">\'state</span> -&gt; (ok,<span class="hljs-symbol">\'message</span>) <span class="hljs-type">Result</span>.t <span class="hljs-type">Js</span>.<span class="hljs-type">Promise</span>.t)*\n      (<span class="hljs-symbol">\'state</span> -&gt; <span class="hljs-symbol">\'state</span> -&gt; <span class="hljs-built_in">bool</span>)) option;}</code></pre>\n      </div>\n    </div>\n  \n<p><code>validateAsync</code> is a tuple that consists of 2 functions:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code>(\n  <span class="hljs-comment">/* 1. async validator */</span>\n  \'state =&gt; <span class="hljs-type">Js</span>.<span class="hljs-type">Promise</span>.t(<span class="hljs-type">Result</span>.t(ok, \'message)),\n\n  <span class="hljs-comment">/* 2. value equality checker */</span>\n  (\'state, \'state) =&gt; bool,\n)</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">1374</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<ol>\n<li>Validator itself takes <code>state</code> and returns <code>Js.Promise.t(Result.t)</code>.</li>\n<li>Value equality checker receives 2 arguments: form state when validation was invoked and form state when response was resolved. Why it\'s required: by the time when server responded with some result, local value might be already changed so before setting received result <code>Formality</code> checks if value of the field is the same that was validated. And if it\'s not it simply ignores this result.</li>\n</ol>\n<p><strong>Please, make sure you check equality of field values, not state instances!</strong></p>\n<p>Example:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code>validateAsync: <span class="hljs-type">Some</span>(\n  (\n    state =&gt;\n      <span class="hljs-type">Js</span>.<span class="hljs-type">Promise</span>.(\n        state.email\n        -&gt;<span class="hljs-type">Api</span>.validateEmail\n        -&gt;then_(\n            valid =&gt;\n              valid ?\n                <span class="hljs-type">Ok</span>(<span class="hljs-type">Valid</span>)-&gt;resolve :\n                <span class="hljs-type">Error</span>(<span class="hljs-string">"Email is already taken"</span>)-&gt;resolve,\n            <span class="hljs-number">_</span>,\n          )\n      ),\n    (prevState, nextState) =&gt; prevState.email == nextState.email,\n  )\n),</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">193</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<p>To create form hook pass config to <code>Formality.Async.Make</code> functor:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyAsyncFormHook</span> = <span class="hljs-title">Formality</span>.<span class="hljs-title">Async</span>.<span class="hljs-title">Make</span>(<span class="hljs-title">MyForm</span>);</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">module</span> <span class="hljs-type">MyAsyncFormHook</span> = <span class="hljs-type">Formality</span>.<span class="hljs-type">Async</span>.<span class="hljs-type">Make</span>(<span class="hljs-type">MyForm</span>)</code></pre>\n      </div>\n    </div>\n  \n<h4 id="async-validations-on-blur"><a href="#async-validations-on-blur" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async validations on blur</h4>\n<p>If you still want to use on blur validations just add <code>validateAsync</code> props to <code>validators</code> and use <code>Formality.Async.MakeOnBlur</code> to create form hook.</p>\n<h4 id="note-on-defining-async-validators"><a href="#note-on-defining-async-validators" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Note on defining async validators</h4>\n<p>When you define async validator you need to local open <code>Async</code> module like this:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">SignupForm</span> = </span>{\n  open <span class="hljs-type">Formality</span>;\n\n  ...\n\n  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">EmailField</span> = </span>{\n    <span class="hljs-keyword">let</span> validator = <span class="hljs-type">Async</span>.{ field: <span class="hljs-type">Email</span>, ... };\n  };\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">2553</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<p>You will probably get <code>Warning 45</code> from compiler. You can address it either by:\n1. Disabling this warning in <code>bsconfig.json</code>.</p>\n<div class="redex-codeblock"><pre class="hljs lang-json"><code><span class="hljs-string">"warnings"</span>: {\n  <span class="hljs-string">"number"</span>: <span class="hljs-string">"-45"</span>\n}</code></pre></div>\n<ol start="2">\n<li>Or change local open to this:</li>\n</ol>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">let</span> validator = {\n  <span class="hljs-type">Async</span>.field: <span class="hljs-type">Email</span>,\n  strategy: <span class="hljs-type">OnFirstSuccessOrFirstBlur</span>,\n  ...\n};</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">2867</span>: &lt;<span class="hljs-type">UNKNOWN</span> <span class="hljs-type">SYNTAX</span> <span class="hljs-type">ERROR</span>&gt;</code></pre>\n      </div>\n    </div>\n  \n<h3 id="custom-field-comparator"><a href="#custom-field-comparator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom field comparator</h3>\n<p>By default Formality uses <code>Pervasives.compare</code> to compare fields internally. This works when forms are simple, but can cause troubles when fields contain incomparable values, like functions. In such case <code>Pervasives.compare</code> will throw exception.\nYou can create form with your own comparator</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">LoginForm</span> = </span>{\n  <span class="hljs-keyword">type</span> field =\n    | <span class="hljs-type">Email</span>\n    | <span class="hljs-type">Password</span>\n    | <span class="hljs-type">RememberMe</span>;\n\n  <span class="hljs-keyword">type</span> state = {\n    email: string,\n    password: string,\n    rememberMe: bool,\n  };\n\n  <span class="hljs-keyword">type</span> message = string;\n  <span class="hljs-keyword">type</span> submissionError = unit;\n\n  <span class="hljs-keyword">let</span> validators = [];\n\n  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">FieldId</span> =\n    <span class="hljs-title">Belt</span>.<span class="hljs-title">Id</span>.<span class="hljs-title">MakeComparable</span>(</span>{\n      <span class="hljs-keyword">type</span> t = field;\n      <span class="hljs-keyword">let</span> cmp = <span class="hljs-type">Pervasives</span>.compare;\n    });\n};\n<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">LoginForm</span> = <span class="hljs-title">Formality</span>.<span class="hljs-title">MakeWithId</span>(<span class="hljs-title">LoginForm</span>);</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">module</span> <span class="hljs-type">LoginForm</span> =\n  <span class="hljs-keyword">struct</span>\n    <span class="hljs-keyword">type</span> field =\n      | <span class="hljs-type">Email</span>\n      | <span class="hljs-type">Password</span>\n      | <span class="hljs-type">RememberMe</span>\n    <span class="hljs-keyword">type</span> state = {\n      email: <span class="hljs-built_in">string</span>;\n      password: <span class="hljs-built_in">string</span>;\n      rememberMe: <span class="hljs-built_in">bool</span>;}\n    <span class="hljs-keyword">type</span> message = <span class="hljs-built_in">string</span>\n    <span class="hljs-keyword">type</span> submissionError = <span class="hljs-built_in">unit</span>\n    <span class="hljs-keyword">let</span> validators = <span class="hljs-literal">[]</span>\n    <span class="hljs-keyword">module</span> <span class="hljs-type">FieldId</span> =\n      <span class="hljs-type">Belt</span>.<span class="hljs-type">Id</span>.<span class="hljs-type">MakeComparable</span>(<span class="hljs-keyword">struct</span>\n                               <span class="hljs-keyword">type</span> t = field\n                               <span class="hljs-keyword">let</span> cmp = <span class="hljs-type">Pervasives</span>.compare\n                             <span class="hljs-keyword">end</span>)\n  <span class="hljs-keyword">end</span>\n<span class="hljs-keyword">module</span> <span class="hljs-type">LoginForm</span> = <span class="hljs-type">Formality</span>.<span class="hljs-type">MakeWithId</span>(<span class="hljs-type">LoginForm</span>)</code></pre>\n      </div>\n    </div>\n  \n<p>Each Formality form functor has such helper-functor that requires FieldId</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-type">Formality</span>.<span class="hljs-type">MakeWithId</span>\n<span class="hljs-type">Formality</span>.<span class="hljs-type">Async</span>.<span class="hljs-type">MakeWithId</span>\n<span class="hljs-type">Formality</span>.<span class="hljs-type">Async</span>.<span class="hljs-type">MakeOnBlurWithId</span></code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-number">1444</span>: syntax error, consider adding a `;<span class="hljs-char">\' before</span></code></pre>\n      </div>\n    </div>\n  \n<p><a href="/examples/FormsWithFieldId.re">Custom comparator usage examples</a></p>\n<h3 id="i18n"><a href="#i18n" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I18n</h3>\n<p>If you build i18n\'ized app then set <code>message</code> type in form config to your <code>I18n.t</code> type. E.g.:</p>\n\n    <div class="redex-codeblock m-tabbed">\n      <ul>\n        <li class="reason s-selected"> RE\n        <li class="ml"> ML\n      </ul>\n      <div class="codeblock reason s-selected">\n        <pre class="hljs lang-reason"><code><span class="hljs-keyword">type</span> message = <span class="hljs-type">I18n</span>.t;</code></pre>\n      </div>\n      <div class="codeblock ml">\n        <pre class="hljs lang-ml"><code><span class="hljs-keyword">type</span> message = <span class="hljs-type">I18n</span>.t</code></pre>\n      </div>\n    </div>\n  \n<h2 id="alternatives"><a href="#alternatives" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Alternatives</h2>\n<ul>\n<li><a href="https://github.com/Astrocoders/reform">ReForm</a><br>\nAlternative form state management solution for ReasonReact apps.</li>\n</ul>\n<h2 id="license"><a href="#license" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>License</h2>\n<p>MIT.</p>\n',
homepageUrl:"https://github.com/alexfedoseev/re-formality#readme",repositoryUrl:"https://github.com/alexfedoseev/re-formality",npmUrl:"https://www.npmjs.com/package/re-formality",issuesUrl:"https://github.com/alexfedoseev/re-formality/issues",slug:"/package/re-formality"}},pathContext:{id:"re-formality"}}}});
//# sourceMappingURL=path---package-re-formality-dd03709f0ffb874da88f.js.map